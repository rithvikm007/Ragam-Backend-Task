<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <form action="/" method="get">
        <button>Go Back</button>
    </form>
    <h2>All Users</h2>
    <form action="/users/new" method="get">
        <button>Add New User</button>
    </form>
    <div class="userContainer">
        
        <% for(let user of users){ %>
            <div class="user">

                <h3><%= user.name %></h3>
                <p>Membership Type: <%= user.membership_type %></p>
                <p>Resistered Date: <%= user.registered_date.toString().split(" ").slice(1,4).join(" ") %></p></p>
                <p>No of Books Borrowed: <%= user.borrowed_books.length %></p>
                <form action="/users/<%= user._id %>" method="get">
                    <button>Show More Details</button>
                </form>
                <form action="/users/<%= user._id %>/edit" method="get">
                    <button>Edit</button>
                </form>
                <form action="/users/?_method=DELETE" method="post" onsubmit="return confirm('Are you sure you want to delete this user?')">
                    <input type="hidden" name="user_id" value="<%= user._id %>">
                    <button>Delete</button>
                </form>
            </div>
        <% } %>
    </div>
</body>
</html>